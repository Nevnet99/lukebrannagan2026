---
import { Github, Layers, ArrowUpRight, Signal } from "@lucide/astro";

// --- DATA CONFIGURATION ---
const projects = [
  {
    title: "Trading Terminal",
    description:
      "High-performance financial dashboard built for real-time data visualization. Uses HTMX for partial swaps and Clojure for immutable state management.",
    tech: ["HTMX", "Clojure", "WebSockets", "Tailwind"],
    liveUrl: "#",
    repoUrl: "#",
    status: "online", // 'online' | 'building' | 'offline'
  },
  {
    title: "Linear Clone",
    description:
      "A pixel-perfect recreation of the Linear issue tracker. Focuses on optimistic UI updates, keyboard shortcuts, and instant interactions.",
    tech: ["HTMX", "Clojure", "Postgres", "Alpine.js"],
    liveUrl: "#",
    repoUrl: "#",
    status: "building",
  },
  {
    title: "Biff Clone",
    description:
      "An architectural exploration of the Biff framework. Demonstrates functional backend patterns and simplified data layers.",
    tech: ["Clojure", "XTDB", "HTMX"],
    liveUrl: "#",
    repoUrl: "#",
    status: "offline",
  },
];

// Helper to get status color
const getStatusColor = (status: string) => {
  switch (status) {
    case "online":
      return "bg-green-400 shadow-[0_0_8px_rgba(74,222,128,0.6)]";
    case "building":
      return "bg-yellow-400 animate-pulse";
    case "offline":
      return "bg-red-400";
    default:
      return "bg-gray-400";
  }
};
---

<section class="max-w-5xl mx-auto px-6 py-20 font-mono">
  {/* SECTION HEADER */}
  <div class="flex items-center gap-3 mb-12 border-b border-text/10 pb-4">
    <Layers size={20} class="text-text/60" />
    <h2 class="text-2xl font-bold tracking-tight">
      Deployed Units
      <span
        class="text-text/40 text-lg font-normal ml-4 hidden sm:inline-block"
      >
        / Side_Projects
      </span>
    </h2>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {
      projects.map((project) => (
        <div class="group relative border border-text/20 bg-background p-6 hover:border-text/50 transition-all duration-300 hover:-translate-y-1">
          {/* Status Indicator (Top Right) */}
          <div class="absolute top-4 right-4 flex items-center gap-2">
            <span class="text-[10px] uppercase text-text/40 tracking-wider font-bold">
              [{project.status}]
            </span>
            <div
              class={`w-2 h-2 rounded-full ${getStatusColor(project.status)}`}
            />
          </div>

          {/* Title */}
          <h3 class="text-xl font-bold mb-3 flex items-center gap-2">
            {project.title}
          </h3>

          {/* Description */}
          <p class="text-sm text-text/70 leading-relaxed mb-6 h-auto md:h-20">
            {project.description}
          </p>

          {/* Tech Stack Pills */}
          <div class="flex flex-wrap gap-2 mb-8">
            {project.tech.map((t) => (
              <span class="text-xs border border-text/10 px-2 py-1 text-text/60 bg-text/5">
                {t}
              </span>
            ))}
          </div>

          {/* Actions (Bottom Bar) */}
          <div class="flex items-center gap-4 mt-auto border-t border-text/10 pt-4">
            {project.liveUrl !== "#" && (
              <a
                href={project.liveUrl}
                target="_blank"
                class="flex items-center gap-2 text-xs font-bold hover:text-blue-400 transition-colors"
              >
                <Signal size={14} />
                <span>LIVE_DEMO</span>
              </a>
            )}

            {project.repoUrl !== "#" && (
              <a
                href={project.repoUrl}
                target="_blank"
                class="flex items-center gap-2 text-xs font-bold hover:text-blue-400 transition-colors"
              >
                <Github size={14} />
                <span>SOURCE</span>
              </a>
            )}

            {/* Decorative Arrow */}
            <ArrowUpRight
              size={14}
              class="ml-auto text-text/20 group-hover:text-blue-400 transition-colors"
            />
          </div>
        </div>
      ))
    }

    {/* "Incoming" Placeholder Card (Optional, fills grid) */}
    <div
      class="border border-dashed border-text/20 bg-background/30 p-6 flex flex-col items-center justify-center text-center opacity-50 hover:opacity-100 transition-opacity"
    >
      <div
        class="w-12 h-12 border border-text/20 rounded-full flex items-center justify-center mb-4"
      >
        <span class="text-2xl">+</span>
      </div>
      <h3 class="font-bold text-sm">Next Project</h3>
      <p class="text-xs text-text/50 mt-1">Architecture in progress...</p>
    </div>
  </div>
</section>
