---
import { Globe } from "@lucide/astro";

const TEXT = "AVAILABLE FOR CONTRACT & PERM ROLES";
const REPEATS = 4;
---

<div
  class="w-full border-y border-text/10 bg-background/50 backdrop-blur-sm overflow-hidden font-mono text-sm py-3 relative z-20"
  aria-hidden="true"
>
  <div class="flex whitespace-nowrap w-max hover:pause-animation">
    <div class="flex items-center gap-8 px-4 animate-ticker">
      {
        Array.from({ length: REPEATS }).map(() => (
          <div class="flex items-center gap-3">
            <div class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75" />
              <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500" />
            </div>
            <span class="text-text/70 font-bold tracking-widest uppercase">
              {TEXT}
            </span>
            <Globe size={14} class="text-text/50 ml-5" />
          </div>
        ))
      }
    </div>

    {/* Block 2 (Duplicate for seamless loop) */}
    <div class="flex items-center gap-8 px-4 animate-ticker" aria-hidden="true">
      {
        Array.from({ length: REPEATS }).map(() => (
          <div class="flex items-center gap-3">
            <div class="relative flex h-2 w-2">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75" />
              <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500" />
            </div>
            <span class="text-text/70 font-bold tracking-widest uppercase">
              {TEXT}
            </span>
            <Globe size={14} class="text-text/50 ml-5" />
          </div>
        ))
      }
    </div>
  </div>

  {/* Left/Right Fade Masks (Optional depth effect) */}
  <div
    class="absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-background to-transparent pointer-events-none"
  >
  </div>
  <div
    class="absolute inset-y-0 right-0 w-20 bg-gradient-to-l from-background to-transparent pointer-events-none"
  >
  </div>
</div>

<style>
  /* Define the animation locally so you don't need to touch tailwind.config */
  .animate-ticker {
    animation: ticker 40s linear infinite;
  }

  /* Pause on hover so people can read it if they want */
  .hover\:pause-animation:hover .animate-ticker {
    animation-play-state: paused;
  }

  @keyframes ticker {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-100%);
    }
  }
</style>
